import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
const shadow_esm_import = function(x) { return import(x) };
import*as esm_import$fs from"fs";import*as esm_import$import_meta_resolve from"import-meta-resolve";import*as esm_import$url from"url";import*as esm_import$path from"path";import*as esm_import$module from"module";var Rsa,Ssa,Msa,dX,Psa,Tsa,hX,Qsa,iX;$APP.Lsa=function(a){a=$APP.Od(a);a=$APP.zp.h(function(d){return $APP.Rx($APP.py(),d)},a);var b=$APP.r($APP.Zs),c=$APP.r($APP.Is);return $APP.wy(a,new $APP.k(null,2,[$APP.S,b,$APP.yn,c],null))};$APP.Nsa=function(a,b){return dX(Msa,a,b)};
$APP.fX=function(a,b){return Promise.resolve($APP.l($APP.r(Osa))?null:function(){var c=esm_import$path.resolve($APP.l(a)?a:"script.cljs"),d=$APP.l($APP.$G.g(b))?$APP.Gj.j(b,$APP.$G,$APP.KS.g(esm_import$fs.readFileSync($APP.$G.g(b),"utf8"))):function(){var h;a:for(h=c;;){var n=esm_import$fs.existsSync(h);n=$APP.l(n)?esm_import$fs.lstatSync(h).isDirectory():n;if($APP.l(n)){n=esm_import$path.resolve(h,"nbb.edn");if($APP.l(esm_import$fs.existsSync(n))){h=n;break a}n=esm_import$path.dirname(h)}else n=
esm_import$path.dirname(h);if($APP.z.h(n,h)){h=null;break a}h=n}return $APP.l(h)?(n=$APP.KS.g(esm_import$fs.readFileSync(h,"utf8")),$APP.Gj.l(b,$APP.$G,n,$APP.B([$APP.GO,esm_import$path.dirname(h)]))):b}(),e=eX.g?eX.g(c):eX.call(null,c),f=$APP.m.g(esm_import$url.pathToFileURL(c));$APP.Ay.require=e;$APP.Sk.C($APP.zy,$APP.Gj,$APP.$o,e);$APP.Sk.C($APP.zy,$APP.Gj,$APP.Cy,function(h){return esm_import$import_meta_resolve.resolve(h,f)});$APP.uh($APP.nV,d);return Promise.resolve(function(){var h=function(){var C=
$APP.ub(Psa.g(d));return C?$APP.$G.g(d):C}();if($APP.l(h)){h=Qsa.g(h);if($APP.l(h)){h=$APP.u(h);for(var n=null,q=0,p=0;;)if(p<q){var w=n.S(null,p);$APP.ub(esm_import$path.isAbsolute(w))?$APP.Ir(function(){var C=$APP.GO.g(d);return $APP.l(C)?esm_import$path.resolve(C,w):w}()):$APP.Ir(w);p+=1}else if(h=$APP.u(h)){n=h;if($APP.Ne(n))h=$APP.hd(n),p=$APP.id(n),n=h,q=$APP.me(h),h=p;else{var v=$APP.x(n);$APP.ub(esm_import$path.isAbsolute(v))?$APP.Ir(function(){var C=$APP.GO.g(d);return $APP.l(C)?esm_import$path.resolve(C,
v):v}()):$APP.Ir(v);h=$APP.y(n);n=null;q=0}p=0}else break}else $APP.Ir(process.cwd());return shadow_esm_import("./nbb_deps.js")}return $APP.Ir(process.cwd())}()).then(function(){return $APP.uh(Osa,!0)})}())};$APP.gX=function(a,b){return $APP.jx(a,b)};
Rsa=function(a,b){b=$APP.Px(a,$APP.ym("(keys (ns-map '%s))","%s",b));b=$APP.sk.h(function(c){return["`",$APP.m.g(c)].join("")},b);b=["[",$APP.wp.h(" ",b),"]"].join("");a=$APP.Px(a,b);return $APP.Wu.h(function(c){return $APP.Im($APP.m.g(c),"nbb.internal")},a)};
Ssa=function(a,b){var c=$APP.py();b=$APP.Em.h(b,/\//);$APP.A.j(b,0,null);var d=$APP.A.j(b,1,null),e=$APP.Px(c,$APP.Nk.l($APP.B([$APP.W.g($APP.u($APP.J.l(new $APP.D(null,$APP.et,null,1,null),new $APP.D(null,$APP.fi($APP.W.g($APP.u($APP.J.h(new $APP.D(null,hX,null,1,null),new $APP.D(null,$APP.W.g($APP.u($APP.J.h(new $APP.D(null,$APP.ija,null,1,null),new $APP.D(null,$APP.W.g($APP.u($APP.J.h(new $APP.D(null,$APP.Xl,null,1,null),new $APP.D(null,a,null,1,null)))),null,1,null)))),null,1,null))))),null,1,
null),$APP.B([new $APP.D(null,$APP.W.g($APP.u($APP.J.l(new $APP.D(null,$APP.bO,null,1,null),new $APP.D(null,$APP.W.g($APP.u($APP.J.h(new $APP.D(null,$APP.Hma,null,1,null),new $APP.D(null,hX,null,1,null)))),null,1,null),$APP.B([new $APP.D(null,hX,null,1,null)])))),null,1,null)]))))])));if($APP.l(e)&&(c=$APP.l(d)?function(){var n=$APP.Da(d,"."),q=$APP.Em.h(d,/\./);n=n?q:$APP.Pj(q);return new $APP.F(null,2,5,$APP.H,[[$APP.m.g(a),"/",$APP.u(n)?[$APP.wp.h(".",n),"."].join(""):null].join(""),$APP.qh.j($APP.Ia,
e,n)],null)}():new $APP.F(null,2,5,$APP.H,[[$APP.m.g(a),"/"].join(""),e],null),$APP.l(c))){var f=$APP.A.j(c,0,null),h=$APP.A.j(c,1,null);c=function(){for(var n=h,q=$APP.Nh;;)if($APP.l(n)){var p=Object.getPrototypeOf(n);q=$APP.Ei.h(q,Object.getOwnPropertyNames(n));n=p}else return q}();return $APP.sk.h(function(n){return new $APP.F(null,2,5,$APP.H,[null,[$APP.m.g(f),$APP.m.g(n)].join("")],null)},c)}return null};
$APP.Usa=function(a){var b=$APP.Sg(a);a=$APP.Xe.h(b,$APP.S);try{var c=$APP.py(),d=$APP.l(a)?$APP.gX(c,$APP.Ak.g(a)):null,e=$APP.Qg([$APP.Zs,$APP.l(d)?d:$APP.r($APP.Zs)]);$APP.fs(e);try{var f=function(){var ja=$APP.so.g(b);return $APP.l(ja)?ja:$APP.NF.g(b)}();if($APP.l(f)){var h=-1!=f.indexOf("/"),n=h?function(){var ja=$APP.Em.h(f,/\//);ja=null==ja?null:$APP.x(ja);return null==ja?null:$APP.Ak.g(ja)}():null,q=Rsa(c,$APP.Px(c,"(ns-name *ns*)")),p=$APP.sk.h(function(ja){return new $APP.F(null,3,5,$APP.H,
[$APP.ug(ja),$APP.Qj(ja),Tsa],null)},q),w=$APP.Px(c,"(let [m (ns-aliases *ns*)] (zipmap (keys m) (map ns-name (vals m))))"),v=$APP.Rj($APP.Dj(w),$APP.Bj(w)),C=$APP.Lp.g($APP.Hh.l(function(ja){var pa=$APP.Xe.h(w,ja);ja=$APP.Px(c,$APP.ym("(keys (ns-publics '%s))","%s",pa));return $APP.sk.h(function(la){return new $APP.F(null,3,5,$APP.H,[$APP.m.g(pa),$APP.m.g(la),iX],null)},ja)},$APP.B([$APP.Bj(w)]))),G=$APP.sk.h(function(ja){return new $APP.F(null,3,5,$APP.H,[$APP.m.g(ja),null,iX],null)},$APP.Px(c,
"(all-ns)")),M=h?Ssa(n,f):null,V=$APP.l(M)?null:h?function(){var ja=$APP.Xe.j(w,n,n),pa=$APP.Px(c,$APP.ym("(and (find-ns '%s)\n                                                                                         (keys (ns-publics '%s)))","%s",ja));return $APP.sk.h(function(la){return new $APP.F(null,3,5,$APP.H,[$APP.m.g(ja),$APP.m.g(la),iX],null)},pa)}():null,X=$APP.J.l(p,C,$APP.B([G,V])),Z=$APP.Dp.h(function(ja){var pa=$APP.A.j(ja,0,null);var la=$APP.A.j(ja,1,null);ja=$APP.A.j(ja,2,null);ja=
$APP.z.h(Tsa,ja)&&-1!=la.indexOf(f)?new $APP.F(null,2,5,$APP.H,[pa,la],null):null;$APP.l(ja)?pa=ja:$APP.l(pa)?(ja=[$APP.m.g($APP.Xe.h(v,$APP.Ak.g(pa))),"/",$APP.m.g(la)].join(""),ja=-1!=ja.indexOf(f)?new $APP.F(null,2,5,$APP.H,[pa,ja],null):null,$APP.l(ja)?pa=ja:(la=[$APP.m.g(pa),"/",$APP.m.g(la)].join(""),pa=-1!=la.indexOf(f)?new $APP.F(null,2,5,$APP.H,[pa,la],null):null)):pa=null;return pa},X),da=$APP.J.h(Z,M),ha=$APP.fi($APP.yA.g($APP.sk.h(function(ja){var pa=$APP.A.j(ja,0,null);ja=$APP.A.j(ja,
1,null);ja=new $APP.k(null,1,["candidate",$APP.m.g(ja)],null);return $APP.l(pa)?$APP.Gj.j(ja,"ns",$APP.m.g(pa)):ja},da)));return new $APP.k(null,2,["completions",ha,"status",new $APP.F(null,1,5,$APP.H,["done"],null)],null)}return new $APP.k(null,1,["status",new $APP.F(null,1,5,$APP.H,["done"],null)],null)}finally{$APP.hs()}}catch(ja){return console.warn(ja),new $APP.k(null,2,["completions",$APP.Nh,"status",new $APP.F(null,1,5,$APP.H,["done"],null)],null)}};Msa={};
dX=function dX(a,b,c){for(;;){if(b instanceof Promise)return b;if(Msa===a){if($APP.Qe(b))return $APP.rV(b,b,c,dX);a=$APP.Ly(b,c)}else{b=Promise;var e=b.resolve;var f=$APP.xL.g(c);f=$APP.l(f)?f:$APP.mf;c=new $APP.k(null,1,[$APP.S,$APP.S.g(c)],null);c=f.h?f.h(a,c):f.call(null,a,c);return e.call(b,c)}}};$APP.jX=new $APP.E(null,"port","port",1534937262);$APP.kX=new $APP.t(null,"socket-repl","socket-repl",-1615225633,null);$APP.lX=new $APP.t(null,"repl","repl",1605132860,null);
Psa=new $APP.E(null,"disableConfig","disableConfig",844586790);Tsa=new $APP.E(null,"unqualified","unqualified",-98904653);hX=new $APP.t(null,"resolved__33589__auto__","resolved__33589__auto__",-1856454642,null);$APP.mX=new $APP.E(null,"classpath","classpath",299521985);Qsa=new $APP.E(null,"paths","paths",-1807389588);iX=new $APP.E(null,"qualified","qualified",-2065109343);$APP.Vsa=new $APP.E(null,"host","host",-1558485167);$APP.nX=new $APP.t(null,"start-server!","start-server!",203437330,null);var eX,Osa;eX=function(){var a=esm_import$module.createRequire;return $APP.l(a)?a:function(){return function(){throw Error("createRequire is not defined, this is a no-op");}}}();Osa=$APP.Rk.g(!1);$APP.oX=function oX(a){switch(arguments.length){case 1:return oX.g(arguments[0]);case 2:return oX.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};$APP.oX.g=function(a){return $APP.oX.h(a,null)};
$APP.oX.h=function(a,b){b=$APP.VA.l(b,$APP.B([$APP.WA,!0]));var c=esm_import$path.resolve(a);$APP.uh($APP.Wqa,c);return $APP.fX(c,b).then(function(){return $APP.Ry(c)})};$APP.oX.o=2;$APP.pX=function pX(a){switch(arguments.length){case 1:return pX.g(arguments[0]);case 2:return pX.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};$APP.pX.g=function(a){return $APP.pX.h(a,null)};
$APP.pX.h=function(a,b){b=$APP.VA.l(b,$APP.B([$APP.WA,!0]));return $APP.fX(null,b).then(function(){return $APP.Py(a)})};$APP.pX.o=2;export let loadFile=$APP.oX;export let loadString=$APP.pX;export let getClassPath=function(){return $APP.Hr()};export let addClassPath=function(a){return $APP.Ir(a)};export let version=function(){return $APP.jz()};export let registerModule=function(a,b){b=$APP.Ey($APP.gm(b));return $APP.Sk.C($APP.yy,$APP.Gj,b,a)};export let printErrorReport=$APP.sV;