import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
import "./nbb_goog_string.js";
const shadow_esm_import = function(x) { return import(x) };
import*as esm_import$fs from"fs";
var YEa=function(a){if(a instanceof $APP.t)return new $APP.k(null,1,[$APP.S,a],null);if($APP.Re(a)){a=$APP.z.h($APP.Xl,$APP.x(a))?$APP.se(a):a;var b=$APP.u(a);a=$APP.x(b);b=$APP.y(b);a=new $APP.k(null,1,[$APP.S,a],null);for(b=$APP.u(b);;)if(b){var c=$APP.x(b);switch(c instanceof $APP.E?c.ea:null){case "as":a=$APP.Gj.j(a,$APP.iq,$APP.se(b));b=$APP.ve(b);continue;case "refer":c=$APP.se(b);$APP.Re(c)?(a=$APP.Gj.j(a,$APP.yu,$APP.se(b)),b=$APP.ve(b)):b=$APP.ve(b);continue;default:b=$APP.ve(b)}}else return a}else return null},
ZEa=function(a){var b=$APP.Sg(a);a=$APP.Xe.h(b,$APP.S);b=$APP.Xe.h(b,$APP.iq);return new $APP.F(null,3,5,$APP.H,[a,$APP.iq,b],null)},$Ea=function(a){return $APP.Dp.h(function(b){if($APP.Re(b)){var c=$APP.x(b);return $APP.z.h($APP.$o,c)?(b=$APP.Dp.h(YEa,$APP.Od(b)),b=$APP.sk.h(ZEa,b),$APP.zv.h($APP.$o,b)):null}return b},a)},aFa=function(a){return $APP.Dp.h(function(b){return $APP.Qe(b)&&$APP.z.h($APP.Xl,$APP.x(b))?$APP.se(b):null},a)},bFa=function(a){a=aFa($APP.Od(a));a=$APP.sk.h(YEa,a);return $APP.zv.h($APP.IR,
$APP.sk.h(function(b){return new $APP.D(null,$APP.Xl,new $APP.D(null,ZEa(b),null,1,null),2,null)},a))},cFa=function(a){a=aFa($APP.Od(a));a=$APP.sk.h(function(b){return new $APP.D(null,$APP.Xl,new $APP.D(null,b,null,1,null),2,null)},a);return $APP.u(a)?$APP.zv.h($APP.AS,a):null},W3=function(a){var b=$APP.r($APP.Is);return[$APP.l(b)?[$APP.m.g(b),":"].join(""):null,$APP.m.g($APP.Ym(a)),":",$APP.m.g($APP.Zm(a))].join("")},dFa=function(a){var b=$APP.Sg(a);a=$APP.Xe.h(b,$APP.Ru);b=$APP.Xe.h(b,X3);a=$APP.Gj.j(a,
$APP.Mu,!0);var c=$APP.Qg([$APP.Zs,$APP.r($APP.Zs),$APP.Is,$APP.r($APP.Is),$APP.yT,$APP.mf]);$APP.fs(c);try{var d=$APP.u(b);b=null;for(var e=c=0;;)if(e<c){for(var f=b.S(null,e),h=$APP.Er(f);;){try{var n=$APP.Hy.j(a,h,new $APP.k(null,1,[$APP.Oq,new $APP.Jj(null,new $APP.k(null,2,[$APP.Iy,null,$APP.Jy,null],null),null)],null))}catch(ha){console.log($APP.Gl(ha)),n=console.error("[babashka]","Ignoring read error while assembling uberscript near",W3(h))}if($APP.z.h($APP.dD,n))break;else if($APP.Qe(n)){var q=
$APP.x(n),p=$APP.z.h($APP.Ql,q)?$Ea(n):$APP.z.h($APP.IR,q)?bFa(n):$APP.z.h($APP.AS,q)?cFa(n):null;if($APP.l(p))try{$APP.Rx(a,p)}catch(ha){console.log(ha),console.error("[babashka]","Ignoring read error while assembling uberscript near",W3(h))}}}e+=1}else{var w=$APP.u(d);if(w){var v=w;if($APP.Ne(v)){var C=$APP.hd(v),G=$APP.id(v);v=C;var M=$APP.me(C);d=G;b=v;c=M}else{f=$APP.x(v);for(var V=$APP.Er(f);;){try{var X=$APP.Hy.j(a,V,new $APP.k(null,1,[$APP.Oq,new $APP.Jj(null,new $APP.k(null,2,[$APP.Iy,null,
$APP.Jy,null],null),null)],null))}catch(ha){console.log($APP.Gl(ha)),X=console.error("[babashka]","Ignoring read error while assembling uberscript near",W3(V))}if($APP.z.h($APP.dD,X))break;else if($APP.Qe(X)){var Z=$APP.x(X),da=$APP.z.h($APP.Ql,Z)?$Ea(X):$APP.z.h($APP.IR,Z)?bFa(X):$APP.z.h($APP.AS,Z)?cFa(X):null;if($APP.l(da))try{$APP.Rx(a,da)}catch(ha){console.log(ha),console.error("[babashka]","Ignoring read error while assembling uberscript near",W3(V))}}}d=$APP.y(v);b=null;c=0}e=0}else break}}finally{$APP.hs()}},
X3=new $APP.E(null,"expressions","expressions",255689909);(function(){function a(jb){return $APP.Sk.h(p,function(lb){return[$APP.m.g(lb),$APP.Fj.h("",lb)?"\n":null,$APP.m.g(jb)].join("")})}var b=$APP.r($APP.nV);b=$APP.Sg(b);b=$APP.Xe.h(b,$APP.AJ);var c=$APP.Sg(b);b=$APP.Xe.h(c,$APP.Su);var d=$APP.Xe.h(c,$APP.qR),e=$APP.Xe.h(c,$APP.ep);c=$APP.rK.g(b);var f=function(){var jb=$APP.x(d);return $APP.l(jb)?jb:$APP.x(e)}(),h=$APP.Rk.g($APP.Nd),n=$APP.Rk.g($APP.Nh),q=$APP.Rk.g($APP.Nd),p=$APP.Rk.g(""),w=$APP.py(),v=$APP.Px(w,"(set (map ns-name (all-ns)))");w=$APP.Nx(w,
new $APP.k(null,1,[$APP.Pu,function(jb){jb=$APP.Sg(jb);var lb=$APP.Xe.h(jb,$APP.Qu);jb=$APP.Xe.h(jb,$APP.Ru);var Gb=$APP.Xe.h($APP.Qqa,lb);"string"===typeof lb?$APP.Sk.j(h,$APP.mg,$APP.x($APP.Em.j(lb,/\$/,2))):$APP.z.h($APP.TE,lb)?($APP.Sk.j(n,$APP.mg,"./nbb_reagent.js"),$APP.Sk.j(h,$APP.mg,"react")):$APP.z.h($APP.fP,lb)?$APP.Sk.j(n,$APP.mg,"./nbb_reagent.js"):$APP.z.h($APP.jR,lb)?($APP.Sk.j(n,$APP.mg,"./nbb_reagent_dom_server.js"),$APP.Sk.C(h,$APP.mg,"react","react-dom/server")):$APP.l(Gb)?$APP.Sk.j(n,
$APP.mg,Gb):lb instanceof $APP.t&&!$APP.Ze(v,lb)&&(lb=$APP.ym($APP.ym($APP.m.g(lb),".","/"),"-","_"),lb=$APP.Fy(lb),lb=esm_import$fs.readFileSync(lb,"utf-8"),$APP.Sk.j(q,$APP.mg,lb),dFa(new $APP.k(null,2,[$APP.Ru,jb,X3,new $APP.F(null,1,5,$APP.H,[lb],null)],null)));return $APP.Rg}],null));if($APP.l(c))return $APP.KA.l($APP.B(["\nBundle: produce single JS file for usage with bundlers.\n\nUsage:\n\n  nbb bundle \x3cinput.cljs\x3e [opts]\n\nOptions:\n\n -o, --out [file]  Write to file instead of stdout"]));
c=$APP.tV;$APP.tV=!0;try{var C=esm_import$fs.readFileSync(f,"utf-8");$APP.Sk.j(q,$APP.mg,C);dFa(new $APP.k(null,2,[$APP.Ru,w,X3,new $APP.F(null,1,5,$APP.H,[C],null)],null));a($APP.E0("import { loadFile, loadString, registerModule } from '%s'","nbb"));var G=$APP.u($APP.yA.g($APP.r(h)));C=null;for(w=f=0;;)if(w<f){var M=C.S(null,w),V=$APP.gm(M),X=$APP.ym($APP.m.g(V),".","_dot_");a($APP.E0("import * as %s from '%s'",X,M));a($APP.E0("registerModule(%s, '%s')",X,M));w+=1}else{var Z=$APP.u(G);if(Z){var da=
Z;if($APP.Ne(da)){var ha=$APP.hd(da),ja=$APP.id(da);da=ha;var pa=$APP.me(ha);G=ja;C=da;f=pa}else{var la=$APP.x(da),R=$APP.gm(la),K=$APP.ym($APP.m.g(R),".","_dot_");a($APP.E0("import * as %s from '%s'",K,la));a($APP.E0("registerModule(%s, '%s')",K,la));G=$APP.y(da);C=null;f=0}w=0}else break}var U=$APP.u($APP.yA.g($APP.r(n)));G=null;for(V=M=0;;)if(V<M){var N=G.S(null,V);a($APP.E0("import '%s/lib/%s'","nbb",N));V+=1}else{var T=$APP.u(U);if(T){X=T;if($APP.Ne(X)){var fa=$APP.hd(X),ia=$APP.id(X);X=fa;var ka=
$APP.me(fa);U=ia;G=X;M=ka}else{var ta=$APP.x(X);a($APP.E0("import '%s/lib/%s'","nbb",ta));U=$APP.y(X);G=null;M=0}V=0}else break}var wa=$APP.u($APP.yA.g($APP.r(q)));U=null;for(T=N=0;;)if(T<N){var Ga=U.S(null,T);a($APP.E0("await loadString(%s, {disableConfig: true})",$APP.Nk.l($APP.B([Ga]))));T+=1}else{var Qa=$APP.u(wa);if(Qa){fa=Qa;if($APP.Ne(fa)){var Ta=$APP.hd(fa),ab=$APP.id(fa);fa=Ta;var fb=$APP.me(Ta);wa=ab;U=fa;N=fb}else{var Ya=$APP.x(fa);a($APP.E0("await loadString(%s, {disableConfig: true})",
$APP.Nk.l($APP.B([Ya]))));wa=$APP.y(fa);U=null;N=0}T=0}else break}var $a=$APP.Yia.g(b);return $APP.l($a)?esm_import$fs.writeFileSync($a,$APP.r(p),"utf-8"):$APP.KA.l($APP.B([$APP.r(p)]))}finally{$APP.tV=c}})();